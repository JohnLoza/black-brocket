<% provide(:title, "Detalles") %>
<%= render partial: "/shared/admin/header_band", locals: {title: "Detalles pie de página", labels: ['Web', 'Detalles pie de página'], links: [admin_web_path]} %>

<!--Content whit animation-->
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
         <h5>Agrega o elimina información del pie de página</h5>
         <div class="ibox-tools">
             <a class="collapse-link">
                 <i class="fa fa-chevron-up"></i>
             </a>
         </div>
      </div>
      <div class="ibox ibox-content">
        <a class="btn btn-success btn-sm pull-right" onclick="show_new_form();">Agregar nuevo</a>
        <table class="footable table table-stripped  toggle-arrow-tiny" data-filter=#filter>
          <thead>
            <tr>
              <th>Nombre</th>
              <th data-hide="phone">Detalle</th>
              <th data-hide="phone">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <% @details.each do |detail| %>
              <tr>
                <td><%= detail.name %></td>
                <td><%= detail.detail %></td>
                <td><%= link_to "<i class='fa fa-trash'> Eliminar</i>".html_safe,
                      admin_web_footer_detail_path(detail.id),
                      :class => "btn btn-danger btn-sm", method: :delete,
                      data: {confirm: "Estás seguro(a) de eliminar el detalle?"} %></td>
              </tr>
            <% end #@details.each# %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function show_new_form(){
    modal = $("#modal");
    modal_title = modal.find(".modal-title");
    modal_body = modal.find(".modal-body");

    modal_title.html("Nuevo detalle");
    modal_body.html("<%= j render 'footer_detail_form' %>");

    modal.modal("show");
  }
</script>

<%= render "shared/modal" %>
