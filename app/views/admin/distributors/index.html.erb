<% provide(:title, "Distribuidores") %>
<%= render partial: "/shared/admin/header_band", locals: {title: "Distribuidores", labels: ['Distribuidores']} %>

<!--Content whit animation-->
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">

    <div class="ibox">
      <div class="ibox-content" style="display: block;">
        <div class="row">
	        <div class="col-sm-6 b-r margin-bot-resp">
            <h3 class="m-t-none m-b">Lista de distribuidores</h3>
            <p>Aquí puedes realizar diversas acciones como dar de alta un distributor, modificar, eliminarlo o simplemente ver su información!!!</p>
            <p>En la búsqueda, separa los parámetros con "," ejemplo: Guadalajara, Querétaro, D0009 </p>

	          <%= form_for(:distributor, url: admin_distributors_path, method: :get) do |f| %>

                <% if params[:distributor] %>
                   <%= f.text_field :search, value: params[:distributor][:search], :class => "input form-control",  :placeholder => "Buscar distribuidor...", :maxlength => 50  %>
                <% else %>
                   <%= f.text_field :search, :class => "input form-control",  :placeholder => "Buscar distribuidor...", :maxlength => 50  %>
                <% end %>

               <label>Buscar por zona de distribución:</label>

               <div class="input-group">
                 <div id="select_state" class="form-group">
                   <label class="col-sm-2 control-label">Estado</label>
                   <div class="col-sm-10">
                     <%= link_to 'get_cities_link', get_cities_path + "?state=null", :remote => true, id: "get_cities_link", style: "display:none;"%>
                     <%= select_tag :state_id, options_from_collection_for_select(
                         @states, "id", "name", :selected => @state_id),
                         prompt: "Selecciona...", :class => "input form-control",
                         onchange: " update_state_ref(this.value);
                                     $('#get_cities_link').click(); " %>
                   </div>
                 </div>

                 <div id="select_city" class="form-group">
                   <label class="col-sm-2 control-label">Población</label>
                   <div class="col-sm-10">
                     <%= select_tag :city_id, options_from_collection_for_select(
                         @cities, "id", "name", :selected => @city_id),
                         prompt: "Selecciona...", :class => "input form-control" %>
                   </div>
                 </div>

                 <span class="input-group-btn">
                    <%= f.submit "Buscar".html_safe, :class => "btn btn btn-success" %>
                 </span>
               </div>
		        <% end %>
		      </div>
          <% if @actions["CREATE"] %>
          <div class="hr-line-dashed pro-mobile"></div>
            <div class="col-sm-3 text-center">
              <h4>Registrar Nuevo</h4>
		          <%= link_to "<i class='fa fa-street-view med-icon'></i>".html_safe, new_admin_distributor_path %>
		        </div>
          <% end %>
          <div class="hr-line-dashed pro-mobile"></div>
          <% if @actions["REQUESTS"] %>
            <div class="col-sm-3 text-center">
              <h4>Solicitudes</h4>
              <%= link_to "<i class='fa fa-file-o med-icon'></i>".html_safe, admin_distributor_candidates_path %>
            </div>
          <% end %>
	     </div>
	   </div>
     </div>

    <div class="row">
        <%= render partial: "presentation_table" %>
    </div>
    <% # @distributors.each do |d| %>
      <% # = render partial: "presentation_card", locals: { distributor: d } %>
    <% # end %>

  </div>
</div>
<!--End content whit animation-->
<br><br>
