<section class="row inline-block step step-4 hidden text-center">
  <h4>Requiero Factura</h4>
  <div>
    <%= radio_button_tag "invoice", 1, false, autocomplete: :off, style: 'display: none;',
      required: true, onchange: "removeFilter('.invoice_1', 'invoice'); toggleCFDI(true)", info: "Sí" %>
    <label for="invoice_1">
      <%= image_tag "yes.svg", class: "invoice_1 invoice" %>
    </label>
  </div>

  <div>
    <%= radio_button_tag "invoice", 0, false, autocomplete: :off, style: 'display: none;',
      required: true, onchange: "removeFilter('.invoice_0', 'invoice'); toggleCFDI(false)", info: "No" %>
    <label for="invoice_0">
      <%= image_tag "no.svg", class: "invoice_0 invoice" %>
    </label>
  </div>

  <div class="col-sm-12" style="margin-top: 2em;">
    <select name="cfdi" id="cfdi" size="5" class="form-control hidden">
      <optgroup label="Selecciona CFDI"></optgroup>
      <option selected value="G01">Adquisición de mercancías</option>
      <option value="G02">Devoluciones, descuentos o bonificaciones</option>
      <option value="G03">Gastos en general</option>
      <option value="I01">Construcciones</option>
      <option value="I02">Mobiliario y equipo de oficina por inversión</option>
      <option value="I03">Equipo de transporte</option>
      <option value="I04">Equipo de cómputo y accesorios</option>
      <option value="I05">Dados, troqueles, moldes, matrices</option>
      <option value="I06">Comunicaciones telefónicas</option>
      <option value="I07">Comunicaciones satelitales</option>
      <option value="I08">Otra máquina y equipo</option>
      <option value="D01">Honorarios médicos, dentales y gastos</option>
      <option value="D02">Gastos médicos por incapacidad</option>
      <option value="D03">Gastos funerales</option>
      <option value="D04">Donativos</option>
      <option value="D05">Intereses reales efectivamente pagados</option>
      <option value="D06">Aportaciones voluntarias al SAR</option>
      <option value="D07">Primas por seguros de gastos médicos</option>
      <option value="D08">Gastos de transportación escolar obligatorios</option>
      <option value="D09">Depósitos en cuentas para el ahorro</option>
      <option value="D10">Pagos por servicios educativos</option>
      <option value="P01">Por definir</option>
    </select>
  </div>

  <div class="col-sm-12" style="margin-top: 2em;">
    <select name="invoice-payment-method" id="invoice-payment-method" size="5" class="form-control hidden">
      <optgroup label="Selecciona medio de pago (para facturación)"></optgroup>
      <option selected value="01">Efectivo</option>
      <option value="02">Cheque nominativo</option>
      <option value="03">Transferencia electrónica de fondos</option>
      <option value="04">Tarjeta de crédito</option>
      <option value="05">Monedero electrónico</option>
      <option value="06">Dinero electrónico</option>
      <option value="08">Vales de despensa</option>
      <option value="12">Dación en pago</option>
      <option value="13">Pago por subrogación</option>
      <option value="14">Pago por consignación</option>
      <option value="15">Condonación</option>
      <option value="17">Compensación</option>
      <option value="23">Novación</option>
      <option value="24">Confusión</option>
      <option value="25">Remisión de deuda</option>
      <option value="26">Prescripción o caducidad</option>
      <option value="27">A satisfacción del acreedor</option>
      <option value="28">Trajeta de débito</option>
      <option value="29">Tarjeta de servicios</option>
      <option value="30">Aplicación de anticipos</option>
      <option value="31">Intermediario pagos</option>
      <option value="99">Por definir</option>
    </select>
  </div>
</section>

<script type="text/javascript">
  function toggleCFDI(show) {
    let cfdi = $("#cfdi");
    let invoicePaymentMethod = $("#invoice-payment-method");
    if(show){
      cfdi.removeClass("hidden");
      cfdi.attr("required", true);
      invoicePaymentMethod.removeClass("hidden");
      invoicePaymentMethod.attr("required", true);
    }else{
      cfdi.addClass("hidden");
      cfdi.removeAttr("required");
      invoicePaymentMethod.addClass("hidden");
      invoicePaymentMethod.removeAttr("required");
    }
  }
</script>
