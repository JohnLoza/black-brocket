<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<div class="container">
  <div class="wrapper wrapper-content animated fadeInRight ecommerce">
    <div class="row">
       <div class="col-lg-12" style="border-bottom: dashed 1px #ccc;padding-top:10px;">
         <% if !@order.cancel_description.nil? %>
           <div class="alert alert-danger" role="alert">
           <h4>Se ha cancelado el pedido debido a:</h4>
           <p>
             <%= @order.cancel_description %>
           </p></div>
         <% elsif !@order.reject_description.nil? %>
           <div class="alert alert-danger" role="alert">
           <h4>Se ha rechazado el pago del pedido debido a:</h4>
           <p>
             <%= @order.reject_description %>
           </p></div>
         <% end %>

          <% if !params[:only_address] or params[:only_address] != "Y"%>
            <h3>Pedido</h3>
            <%= image_tag @barcode, class: 'pull-right' %>
            <p><strong>Referencia:</strong> <span class="text-navy">
              <%= @order.hash_id %> 
              <% if !@order.tracking_code.blank? %>
                - <strong>Código de rastreo:</strong> 
                <%= @order.tracking_code %>
              <% end %>
            </span></p>
            
            <p style="font-size:12px;">
              <span><strong>Fecha de creación:</strong> <%= l(@order.created_at, format: :long) %></span><br>
              <span><strong>Última modificación:</strong> <%= l(@order.updated_at, format: :long) %></span><br>
            </p>
            <p style="font-size:12px;">
                <b>Remitente:</b>
                Black Brocket de México S. De R.L de C.V.<br>
                <% warehouse=@order.Warehouse %>
                <%= warehouse.address %>
                <% city = warehouse.City %>
                <%= city.name %>,
                <%= city.State.name %>, México<br>
                Teléfono: (<%= city.lada %>) <%= warehouse.telephone %>
            </p>
          <% end # if to not show when only want address for etiquette # %>

          <%= render "/shared/orders/product_details" %>
        </div>

        <div class="col-lg-12">

          <%= render "/shared/orders/shipment_details" %>

          <%= render "/shared/orders/fiscal_data" %>
        </div>
        <br>

        <div class="col-lg-12 text-center">
          <a onclick="window.print();" href="#" class="btn btn-default print-link">Imprimir</a>
        </div>

    </div>
  </div>
</div>
<!--End content whit animation-->

<script type="text/javascript">
  function money_format(number){
    return parseFloat(number).toFixed(2).replace(/./g, function(c, i, a) {
      return i && c !== "." && ((a.length - i) % 3 === 0) ? ',' + c : c;
    });
  }

  $(document).ready(function(){
    numbers_to_format = $(".number_format");
    numbers_to_format.each(function(){
      $(this).html(money_format($(this).text()));
    });
  });
</script>

<style>
  .print-link, .print-link *
  {
    font-size: 1.3em;
    padding: .5em;
  }
  .table > thead > tr > th,
  .table > tbody > tr > th,
  .table > tfoot > tr > th,
  .table > thead > tr > td,
  .table > tbody > tr > td,
  .table > tfoot > tr > td {
    border-top: 1px solid #e7eaec;
    line-height: 1.42857;
    padding: 8px;
    vertical-align: top;
    font-size: 12px;
  }
  .tablemn > thead > tr > th,
  .tablemn > tbody > tr > th,
  .tablemn > tfoot > tr > th,
  .tablemn > thead > tr > td,
  .tablemn > tbody > tr > td,
  .tablemn > tfoot > tr > td {
    border-top: 1px solid #e7eaec;
    line-height: 1.42857;
    padding: 4px;
    vertical-align: top;
    font-size: 12px;
  }
  @media print
  {
    .print-link, .print-link *
    {
        display: none !important;
    }
  }
</style>
